angular.module("handlerApp").directive("hanDateRange",["$compile","$timeout","$filter","LocaleDateFactory",function(k,l,e,m){return{restrict:"E",replace:!0,scope:{model:"=model",sigle:"@sigle",fieldRequired:"@fieldRequired",name:"@name",min:"@minDate"},template:"",link:function(a,f,c){var g=function(b){var a={};a[b.range.hoje]=[moment(),moment()];a[b.range.ultimos7dias]=[moment().subtract("days",6),moment()];a[b.range.ultimos30dias]=[moment().subtract("days",29),moment()];a[b.range.esteMes]=[moment().startOf("month"),
moment().endOf("month")];a[b.range.ultimoMes]=[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")];return a},h=function(){var b=m.load();a.opts={ranges:g(b),startDate:moment().subtract("days",1),format:b.format,locale:{daysOfWeek:b.daysOfWeek,monthNames:b.monthNames,applyLabel:b.applyLabel,cancelLabel:b.cancelLabel,fromLabel:b.fromLabel,toLabel:b.toLabel,customRangeLabel:b.customRangeLabel}};a.min&&(a.opts.minDate=new Date(a.min.replace(/\"/g,"")));a.sigle?a.opts.singleDatePicker=
!0:(a.opts.ranges=g(b),a.opts.endDate=moment().add("days",7));a.opts.eventHandlers={"apply.daterangepicker":function(b,c){a.model={startDate:c.startDate,endDate:c.endDate};a.$apply()}};a.$watch("model",function(a,c,d){a&&a.startDate&&a.endDate?(c=e("date")(new Date(a.startDate),b.format),d.spanModel=d.sigle?c:c+" - "+e("date")(new Date(a.endDate),b.format)):d.spanModel=""})};c=a.$on("header.changedLanguage",function(a){h()});a.$on("$destroy",c);c='<div class="form-control" class="pull-right" style="cursor: pointer;" date-range-picker="" disable="true" type="text" name="{{name}}" class="form-control date-picker" id="date-picker-input" options="opts" ng-model="model"><i class="fa fa-calendar"></i>&nbsp; <span>{{spanModel}}</span>&nbsp; <i ng-if="model" class="fa fa-times" ng-click="clear()"  style="float:right"></i>';
c+="</div>";f.append(c);a.clear=function(){a.model=null};k(f.contents())(a);l(function(){h()})}}}]);