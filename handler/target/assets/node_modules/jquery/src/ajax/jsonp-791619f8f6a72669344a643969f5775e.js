define(["../core","./var/nonce","./var/rquery","../ajax"],function(c,g,l){var k=[],h=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=k.pop()||c.expando+"_"+g++;this[a]=!0;return a}});c.ajaxPrefilter("json jsonp",function(a,g,m){var b,e,d,f=!1!==a.jsonp&&(h.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&h.test(a.data)&&"data");if(f||"jsonp"===a.dataTypes[0])return b=a.jsonpCallback=c.isFunction(a.jsonpCallback)?
a.jsonpCallback():a.jsonpCallback,f?a[f]=a[f].replace(h,"$1"+b):!1!==a.jsonp&&(a.url+=(l.test(a.url)?"&":"?")+a.jsonp+"="+b),a.converters["script json"]=function(){d||c.error(b+" was not called");return d[0]},a.dataTypes[0]="json",e=window[b],window[b]=function(){d=arguments},m.always(function(){window[b]=e;a[b]&&(a.jsonpCallback=g.jsonpCallback,k.push(b));d&&c.isFunction(e)&&e(d[0]);d=e=void 0}),"script"})});