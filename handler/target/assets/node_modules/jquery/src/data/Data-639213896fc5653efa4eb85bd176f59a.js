define(["../core","../var/rnotwhite","./accepts"],function(e,h){function g(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=e.expando+g.uid++}g.uid=1;g.accepts=e.acceptData;g.prototype={key:function(c){if(!g.accepts(c))return 0;var b={},a=c[this.expando];if(!a){a=g.uid++;try{b[this.expando]={value:a},Object.defineProperties(c,b)}catch(d){b[this.expando]=a,e.extend(c,b)}}this.cache[a]||(this.cache[a]={});return a},set:function(c,b,a){var d;c=this.key(c);var f=this.cache[c];
if("string"===typeof b)f[b]=a;else if(e.isEmptyObject(f))e.extend(this.cache[c],b);else for(d in b)f[d]=b[d];return f},get:function(c,b){var a=this.cache[this.key(c)];return void 0===b?a:a[b]},access:function(c,b,a){if(void 0===b||b&&"string"===typeof b&&void 0===a)return a=this.get(c,b),void 0!==a?a:this.get(c,e.camelCase(b));this.set(c,b,a);return void 0!==a?a:b},remove:function(c,b){var a,d;a=this.key(c);var f=this.cache[a];if(void 0===b)this.cache[a]={};else for(e.isArray(b)?d=b.concat(b.map(e.camelCase)):
(a=e.camelCase(b),b in f?d=[b,a]:(d=a,d=d in f?[d]:d.match(h)||[])),a=d.length;a--;)delete f[d[a]]},hasData:function(c){return!e.isEmptyObject(this.cache[c[this.expando]]||{})},discard:function(c){c[this.expando]&&delete this.cache[c[this.expando]]}};return g});