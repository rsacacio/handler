define(["../core","./support","../core/init"],function(b,k){var l=/\r/g;b.fn.extend({val:function(c){var a,e,f,g=this[0];if(arguments.length)return f=b.isFunction(c),this.each(function(d){1===this.nodeType&&(d=f?c.call(this,d,b(this).val()):c,null==d?d="":"number"===typeof d?d+="":b.isArray(d)&&(d=b.map(d,function(a){return null==a?"":a+""})),a=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],a&&"set"in a&&void 0!==a.set(this,d,"value")||(this.value=d))});if(g){if((a=b.valHooks[g.type]||
b.valHooks[g.nodeName.toLowerCase()])&&"get"in a&&void 0!==(e=a.get(g,"value")))return e;e=g.value;return"string"===typeof e?e.replace(l,""):null==e?"":e}}});b.extend({valHooks:{option:{get:function(c){var a=b.find.attr(c,"value");return null!=a?a:b.trim(b.text(c))}},select:{get:function(c){for(var a,e=c.options,f=c.selectedIndex,g=(c="select-one"===c.type||0>f)?null:[],d=c?f+1:e.length,h=0>f?d:c?f:0;h<d;h++)if(a=e[h],!(!a.selected&&h!==f||(k.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||
a.parentNode.disabled&&b.nodeName(a.parentNode,"optgroup"))){a=b(a).val();if(c)return a;g.push(a)}return g},set:function(c,a){for(var e,f,g=c.options,d=b.makeArray(a),h=g.length;h--;)if(f=g[h],f.selected=0<=b.inArray(f.value,d))e=!0;e||(c.selectedIndex=-1);return d}}}});b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(c,a){if(b.isArray(a))return c.checked=0<=b.inArray(b(c).val(),a)}};k.checkOn||(b.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})})});