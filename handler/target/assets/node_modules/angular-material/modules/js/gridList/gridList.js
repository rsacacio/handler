(function(F,g,G){function x(c,a,D,d){return{restrict:"E",controller:q,scope:{mdOnLayout:"&"},link:function(l,r,h,f){function m(b){null==b?f.invalidateLayout():d(b)&&f.invalidateLayout()}function E(b,e,r,f,p){var k={height:"",paddingBottom:""};switch(f){case "fixed":k.height=v({unit:p,span:e,gutter:r});break;case "ratio":b=y({share:1/b*100*(1/p),gutterShare:1===b?0:(b-1)/b,gutter:r}),k.paddingBottom=v({unit:b,span:e,gutter:r})}return k}function n(){return[].filter.call(r.children(),function(b){return"MD-GRID-TILE"==
b.tagName})}function p(b){return[].map.call(b,function(b){b=g.element(b).controller("mdGridTile");return{row:parseInt(d.getResponsiveAttribute(b.$attrs,"md-rowspan"),10)||1,col:parseInt(d.getResponsiveAttribute(b.$attrs,"md-colspan"),10)||1}})}function u(){var b=parseInt(d.getResponsiveAttribute(h,"md-cols"),10);if(isNaN(b))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return b}function k(){var b=d.getResponsiveAttribute(h,"md-row-height");switch(e()){case "fixed":return A(b);
case "ratio":return b=b.split(":"),parseFloat(b[0])/parseFloat(b[1]);case "fit":return 0}}function e(){var b=d.getResponsiveAttribute(h,"md-row-height");return"fit"==b?"fit":-1!==b.indexOf(":")?"ratio":"fixed"}function A(b){return/\D$/.test(b)?b:b+"px"}r.attr("role","list");f.layoutDelegate=function(b){var f=n(),a={tileSpans:p(f),colCount:u(),rowMode:e(),rowHeight:k(),gutter:A(d.getResponsiveAttribute(h,"md-gutter")||1)};if(b||!g.equals(a,w))b=D(a.colCount,a.tileSpans,f).map(function(b,e){return{grid:{element:r,
style:E(a.colCount,e,a.gutter,a.rowMode,a.rowHeight)},tiles:b.map(function(b,e){var r=g.element(f[e]),p=b.position,k=b.spans,d=a.colCount,h=a.rowCount,c=a.gutter,n=a.rowMode,u=a.rowHeight,l=1/d*100,d=(d-1)/d,m=y({share:l,gutterShare:d,gutter:c}),m={left:z({unit:m,offset:p.col,gutter:c}),width:v({unit:m,span:k.col,gutter:c}),paddingTop:"",marginTop:"",top:"",height:""};switch(n){case "fixed":m.top=z({unit:u,offset:p.row,gutter:c});m.height=v({unit:u,span:k.row,gutter:c});break;case "ratio":h=y({share:l/
u,gutterShare:d,gutter:c});m.paddingTop=v({unit:h,span:k.row,gutter:c});m.marginTop=z({unit:h,offset:p.row,gutter:c});break;case "fit":h=y({share:1/h*100,gutterShare:(h-1)/h,gutter:c}),m.top=z({unit:h,offset:p.row,gutter:c}),m.height=v({unit:h,span:k.row,gutter:c})}return{element:r,style:m}})}}).reflow().performance(),l.mdOnLayout({$event:{performance:b}}),w=a};var q=g.bind(f,f.invalidateLayout),x=function(){for(var b in a.MEDIA)d(b),d.getQuery(a.MEDIA[b]).addListener(q);return d.watchResponsiveAttributes(["md-cols",
"md-row-height"],h,m)}();l.$on("$destroy",function(){f.layoutDelegate=g.noop;x();for(var b in a.MEDIA)d.getQuery(a.MEDIA[b]).removeListener(q)});var w,s=c.startSymbol(),t=c.endSymbol(),y=c(s+"share"+t+"% - ("+(s+"gutter"+t)+" * "+(s+"gutterShare"+t)+")"),z=c("calc(("+(s+"unit"+t)+" + "+(s+"gutter"+t)+") * "+(s+"offset"+t)+")"),v=c("calc(("+(s+"unit"+t)+") * "+(s+"span"+t)+" + ("+(s+"span"+t)+" - 1) * "+(s+"gutter"+t)+")")}}}function q(c){this.tilesInvalidated=this.layoutInvalidated=!1;this.$timeout_=
c;this.layoutDelegate=g.noop}function w(c){function a(a,h){var f,m,g,n,p,u;n=c.time(function(){m=d(a,h)});return f={layoutInfo:function(){return m},map:function(a){p=c.time(function(){var e=f.layoutInfo();g=a(e.positioning,e.rowCount)});return f},reflow:function(a){u=c.time(function(){(a||l)(g.grid,g.tiles)});return f},performance:function(){return{tileCount:h.length,layoutTime:n,mapTime:p,reflowTime:u,totalTime:n+p+u}}}}function q(a,c){a.element.css(a.style);c.forEach(function(a){a.element.css(a.style)})}
function d(a,c){function f(a,c,d){for(var e=a;e<a+c;e++)n[e]=Math.max(n[e]+d,0)}var d=0,g=0,n=function(){for(var c=[],d=0;d<a;d++)c.push(0);return c}();return{positioning:c.map(function(c,h){if(c.col>a)throw"md-grid-list: Tile at position "+h+" has a colspan ("+c.col+") that exceeds the column count ("+a+")";for(var k=0,e=0;e-k<c.col;)if(d>=a)d=0,g++,f(0,a,-1);else{var k=n.indexOf(0,d),l;if(!(l=-1===k)){a:{e=void 0;for(e=k+1;e<n.length;e++)if(0!==n[e])break a;e=e===n.length?e:void 0}l=-1===e}l?(d=
k=e=0,g++,f(0,a,-1)):d=e+1}f(k,c.col,c.row);d=k+c.col;return{spans:c,position:{col:k,row:g}}}),rowCount:g+Math.max.apply(Math,n)}}var l=q;a.animateWith=function(a){l=g.isFunction(a)?a:q};return a}function B(c){return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(a){this.$attrs=a}],link:function(a,q,d,l){q.attr("role","listitem");var r=c.watchResponsiveAttributes(["md-colspan","md-rowspan"],d,g.bind(l,l.invalidateLayout));
l.invalidateTiles();a.$on("$destroy",function(){r();l.invalidateLayout()});g.isDefined(a.$parent.$index)&&a.$watch(function(){return a.$parent.$index},function(a,c){a!==c&&l.invalidateTiles()})}}}function C(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}g.module("material.components.gridList",["material.core"]).directive("mdGridList",x).directive("mdGridTile",B).directive("mdGridTileFooter",C).directive("mdGridTileHeader",C).factory("$mdGridLayout",w);x.$inject=["$interpolate",
"$mdConstant","$mdGridLayout","$mdMedia"];q.$inject=["$timeout"];q.prototype={invalidateTiles:function(){this.tilesInvalidated=!0;this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(g.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.tilesInvalidated=this.layoutInvalidated=!1}}};w.$inject=["$mdUtil"];B.$inject=["$mdMedia"]})(window,window.angular);